{"ast":null,"code":"import _regeneratorRuntime from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import Restaurant from'./Review/Restaurantdetail';var Call=/*#__PURE__*/function(_Component){_inherits(Call,_Component);var _super=_createSuper(Call);function Call(props){var _this;_classCallCheck(this,Call);_this=_super.call(this,props);_this.img_onclick=function(id){var data=_this.state.data[id];_this.setState({img_clicked:data});_this.setState({location:_this.state.data[0].location.display_address});};_this.state={data:[{}],img_clicked:{},location:''};return _this;}_createClass(Call,[{key:\"componentDidMount\",value:function componentDidMount(){{/* call the api on page load */}this.callApi();}},{key:\"callApi\",value:function(){var _callApi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.get('https://cors-anywhere.herokuapp.com/'.concat(\"https://api.yelp.com/v3/businesses/search\"),{headers:{Authorization:\"Bearer \".concat(process.env.REACT_APP_API_KEY)},params:{term:this.props.term,latitude:'40.730610',longitude:'-73.935242'}}).then(function(res){console.log(res.data.businesses);_this2.setState({data:res.data.businesses});_this2.img_onclick(1);console.log(_this2.state.data[0].location.display_address);}).catch(function(err){console.log('error');});case 1:case\"end\":return _context.stop();}}},_callee,this);}));function callApi(){return _callApi.apply(this,arguments);}return callApi;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Restaurant,{imgclicked:this.state.img_clicked,location:this.state.location}));}}]);return Call;}(Component);export{Call as default};","map":{"version":3,"sources":["/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/src/components/Call.js"],"names":["React","Component","axios","Restaurant","Call","props","img_onclick","id","data","state","setState","img_clicked","location","display_address","callApi","get","headers","Authorization","process","env","REACT_APP_API_KEY","params","term","latitude","longitude","then","res","console","log","businesses","catch","err"],"mappings":"23CAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,2BAAvB,C,GAEqBC,CAAAA,I,4FACjB,cAAYC,KAAZ,CAAmB,sCACf,uBAAMA,KAAN,EADe,MAsCjBC,WAtCiB,CAsCL,SAACC,EAAD,CAAM,CAChB,GAAIC,CAAAA,IAAI,CAAC,MAAKC,KAAL,CAAWD,IAAX,CAAgBD,EAAhB,CAAT,CACA,MAAKG,QAAL,CAAc,CAACC,WAAW,CAACH,IAAb,CAAd,EACA,MAAKE,QAAL,CAAc,CAACE,QAAQ,CAAC,MAAKH,KAAL,CAAWD,IAAX,CAAgB,CAAhB,EAAmBI,QAAnB,CAA4BC,eAAtC,CAAd,EACD,CA1CgB,CAEf,MAAKJ,KAAL,CAAa,CACXD,IAAI,CAAE,CAAC,EAAD,CADK,CAEXG,WAAW,CAAC,EAFD,CAGXC,QAAQ,CAAC,EAHE,CAAb,CAFe,aAOpB,C,8EAEqB,CAChB,CAAC,+BAAgC,CACjC,KAAKE,OAAL,GACH,C,0PAIGZ,KAAK,CAACa,GAAN,CAAa,sCAAb,qDAAgG,CAChGC,OAAO,CAAE,CACLC,aAAa,kBAAYC,OAAO,CAACC,GAAR,CAAYC,iBAAxB,CADR,CADuF,CAIhGC,MAAM,CAAE,CACJC,IAAI,CAAE,KAAKjB,KAAL,CAAWiB,IADb,CAEJC,QAAQ,CAAE,WAFN,CAGJC,SAAS,CAAE,YAHP,CAJwF,CAAhG,EAUCC,IAVD,CAUM,SAACC,GAAD,CAAS,CACfC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAAClB,IAAJ,CAASqB,UAArB,EAEA,MAAI,CAACnB,QAAL,CAAc,CAACF,IAAI,CAACkB,GAAG,CAAClB,IAAJ,CAASqB,UAAf,CAAd,EACA,MAAI,CAACvB,WAAL,CAAiB,CAAjB,EACAqB,OAAO,CAACC,GAAR,CAAa,MAAI,CAACnB,KAAL,CAAWD,IAAX,CAAgB,CAAhB,EAAmBI,QAAnB,CAA4BC,eAAzC,EACC,CAhBD,EAiBCiB,KAjBD,CAiBO,SAACC,GAAD,CAAS,CAChBJ,OAAO,CAACC,GAAR,CAAa,OAAb,EACC,CAnBD,E,iLA4BG,CACP,mBACE,4CAEC,oBAAC,UAAD,EAAY,UAAU,CAAE,KAAKnB,KAAL,CAAWE,WAAnC,CAAgD,QAAQ,CAAE,KAAKF,KAAL,CAAWG,QAArE,EAFD,CADF,CAQD,C,kBAtD+BX,S,SAAbG,I","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Restaurant from './Review/Restaurantdetail';\n\nexport default class Call extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n          data: [{}],\n          img_clicked:{},\n          location:''\n        }\n  }\n\n    componentDidMount() {\n        {/* call the api on page load */}\n        this.callApi();\n    }\n    async callApi() {\n        {/*https://medium.com/@chaoyue_zhao/how-to-make-axios-api-calls-with-yelp-fusion-inside-react-js-10755d8485c5*/}\n        \n        axios.get(`${'https://cors-anywhere.herokuapp.com/'}https://api.yelp.com/v3/businesses/search`, {\n        headers: {\n            Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n        },\n        params: {\n            term: this.props.term,\n            latitude: '40.730610',\n            longitude: '-73.935242',\n        }\n        })\n        .then((res) => {\n        console.log(res.data.businesses);\n        \n        this.setState({data:res.data.businesses})\n        this.img_onclick(1)\n        console.log (this.state.data[0].location.display_address);\n        })\n        .catch((err) => {\n        console.log ('error');\n        })\n        \n      }\n      img_onclick=(id)=>{\n        var data=this.state.data[id]\n        this.setState({img_clicked:data})\n        this.setState({location:this.state.data[0].location.display_address})\n      }\n  \n  render() {\n    return (\n      <div>\n       \n       <Restaurant imgclicked={this.state.img_clicked} location={this.state.location} />\n        \n      </div>\n      \n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}