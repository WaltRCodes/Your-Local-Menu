{"ast":null,"code":"import _regeneratorRuntime from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _createForOfIteratorHelper from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import Restaurant from'./Review/Restaurantdetail';import{BrowserRouter as Router,Route,Link,Switch}from\"react-router-dom\";var Call=/*#__PURE__*/function(_Component){_inherits(Call,_Component);var _super=_createSuper(Call);function Call(props){var _this;_classCallCheck(this,Call);_this=_super.call(this,props);_this.img_onclick=function(id){var data=_this.state.data[id];_this.setState({img_clicked:data});_this.setState({location:_this.state.data[0].location.display_address});};_this.state={data:[''],img_clicked:{},location:'',resHTML:[/*#__PURE__*/React.createElement(\"div\",null,\"Please make a search\")]};return _this;}_createClass(Call,[{key:\"componentDidMount\",value:function componentDidMount(){{/* call the api on page load */}this.callApi();//elements = this.state.data.map(resObj => <Restaurant imgclicked={resObj} location={resObj.location.display_address} />);\n//console.log(this.state.data[1]);\n// for(let resObj of this.state.data){\n//   console.log(resObj);\n// }\n}},{key:\"callApi\",value:function(){var _callApi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.get('https://cors-anywhere.herokuapp.com/'.concat(\"https://api.yelp.com/v3/businesses/search\"),{headers:{Authorization:\"Bearer \".concat(process.env.REACT_APP_API_KEY)},params:{term:this.props.term,latitude:'40.730610',longitude:'-73.935242'}}).then(function(res){//console.log(res.data.businesses);\n//let \nvar _iterator=_createForOfIteratorHelper(res.data.businesses),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var resObj=_step.value;console.log(resObj);}}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(_this2.props.capture);var htmlArray=res.data.businesses.map(function(resObj){return/*#__PURE__*/React.createElement(Link,{to:\"/Reviews\",onClick:function onClick(){return _this2.props.capture(/*#__PURE__*/React.createElement(Restaurant,{imgclicked:resObj,location:resObj.location.display_address}),resObj.alias);}},/*#__PURE__*/React.createElement(Restaurant,{imgclicked:resObj,location:resObj.location.display_address}));});_this2.setState({data:res.data.businesses,resHTML:htmlArray});//this.setState({resHTML:elements});\n//this.img_onclick(1);\n//console.log(this.state.data[0].location.display_address);\n}).catch(function(err){console.log('error');});case 1:case\"end\":return _context.stop();}}},_callee,this);}));function callApi(){return _callApi.apply(this,arguments);}return callApi;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{id:\"Gridcontainer\"},this.state.resHTML);}}]);return Call;}(Component);export{Call as default};","map":{"version":3,"sources":["/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/src/components/Call.js"],"names":["React","Component","axios","Restaurant","BrowserRouter","Router","Route","Link","Switch","Call","props","img_onclick","id","data","state","setState","img_clicked","location","display_address","resHTML","callApi","get","headers","Authorization","process","env","REACT_APP_API_KEY","params","term","latitude","longitude","then","res","businesses","resObj","console","log","capture","htmlArray","map","alias","catch","err"],"mappings":"goDAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,2BAAvB,CACA,OAAUC,aAAa,GAAIC,CAAAA,MAA3B,CAAmCC,KAAnC,CAA0CC,IAA1C,CAA+CC,MAA/C,KAA6D,kBAA7D,C,GAEqBC,CAAAA,I,4FACjB,cAAYC,KAAZ,CAAmB,sCACf,uBAAMA,KAAN,EADe,MAyDjBC,WAzDiB,CAyDL,SAACC,EAAD,CAAM,CAChB,GAAIC,CAAAA,IAAI,CAAC,MAAKC,KAAL,CAAWD,IAAX,CAAgBD,EAAhB,CAAT,CACA,MAAKG,QAAL,CAAc,CAACC,WAAW,CAACH,IAAb,CAAd,EACA,MAAKE,QAAL,CAAc,CAACE,QAAQ,CAAC,MAAKH,KAAL,CAAWD,IAAX,CAAgB,CAAhB,EAAmBI,QAAnB,CAA4BC,eAAtC,CAAd,EACD,CA7DgB,CAEf,MAAKJ,KAAL,CAAa,CACXD,IAAI,CAAE,CAAC,EAAD,CADK,CAEXG,WAAW,CAAC,EAFD,CAGXC,QAAQ,CAAC,EAHE,CAIXE,OAAO,CAAC,cAAC,sDAAD,CAJG,CAAb,CAFe,aAQpB,C,8EAEqB,CAChB,CAAC,+BAAgC,CAC/B,KAAKC,OAAL,GACA;AACA;AACA;AACA;AACA;AAEL,C,0PAIGlB,KAAK,CAACmB,GAAN,CAAa,sCAAb,qDAAgG,CAChGC,OAAO,CAAE,CACLC,aAAa,kBAAYC,OAAO,CAACC,GAAR,CAAYC,iBAAxB,CADR,CADuF,CAIhGC,MAAM,CAAE,CACJC,IAAI,CAAE,KAAKlB,KAAL,CAAWkB,IADb,CAEJC,QAAQ,CAAE,WAFN,CAGJC,SAAS,CAAE,YAHP,CAJwF,CAAhG,EAUCC,IAVD,CAUM,SAACC,GAAD,CAAS,CACf;AACA;AAFe,yCAGGA,GAAG,CAACnB,IAAJ,CAASoB,UAHZ,YAGf,+CAAsC,IAA9BC,CAAAA,MAA8B,aACpCC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACD,CALc,qDAMfC,OAAO,CAACC,GAAR,CAAY,MAAI,CAAC1B,KAAL,CAAW2B,OAAvB,EACA,GAAIC,CAAAA,SAAS,CAAGN,GAAG,CAACnB,IAAJ,CAASoB,UAAT,CAAoBM,GAApB,CAAwB,SAAAL,MAAM,qBAE1C,oBAAC,IAAD,EAAM,EAAE,CAAC,UAAT,CAAoB,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACxB,KAAL,CAAW2B,OAAX,cAAmB,oBAAC,UAAD,EAAY,UAAU,CAAEH,MAAxB,CAAgC,QAAQ,CAAEA,MAAM,CAACjB,QAAP,CAAgBC,eAA1D,EAAnB,CAAiGgB,MAAM,CAACM,KAAxG,CAAN,EAA7B,eACE,oBAAC,UAAD,EAAY,UAAU,CAAEN,MAAxB,CAAgC,QAAQ,CAAEA,MAAM,CAACjB,QAAP,CAAgBC,eAA1D,EADF,CAF0C,EAA9B,CAAhB,CAOA,MAAI,CAACH,QAAL,CAAc,CAACF,IAAI,CAACmB,GAAG,CAACnB,IAAJ,CAASoB,UAAf,CAA0Bd,OAAO,CAACmB,SAAlC,CAAd,EACA;AACA;AACA;AACC,CA5BD,EA6BCG,KA7BD,CA6BO,SAACC,GAAD,CAAS,CAChBP,OAAO,CAACC,GAAR,CAAa,OAAb,EACC,CA/BD,E,iLAwCG,CACP,mBACE,2BAAK,EAAE,CAAC,eAAR,EAEE,KAAKtB,KAAL,CAAWK,OAFb,CADF,CAUD,C,kBA3E+BlB,S,SAAbQ,I","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Restaurant from './Review/Restaurantdetail';\nimport {  BrowserRouter as Router, Route, Link,Switch } from \"react-router-dom\";\n\nexport default class Call extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n          data: [''],\n          img_clicked:{},\n          location:'',\n          resHTML:[<div>Please make a search</div>]\n        }\n  }\n\n    componentDidMount() {\n        {/* call the api on page load */}\n          this.callApi();\n          //elements = this.state.data.map(resObj => <Restaurant imgclicked={resObj} location={resObj.location.display_address} />);\n          //console.log(this.state.data[1]);\n          // for(let resObj of this.state.data){\n          //   console.log(resObj);\n          // }\n        \n    }\n    async callApi() {\n        {/*https://medium.com/@chaoyue_zhao/how-to-make-axios-api-calls-with-yelp-fusion-inside-react-js-10755d8485c5*/}\n        \n        axios.get(`${'https://cors-anywhere.herokuapp.com/'}https://api.yelp.com/v3/businesses/search`, {\n        headers: {\n            Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n        },\n        params: {\n            term: this.props.term,\n            latitude: '40.730610',\n            longitude: '-73.935242',\n        }\n        })\n        .then((res) => {\n        //console.log(res.data.businesses);\n        //let \n        for(let resObj of res.data.businesses){\n          console.log(resObj);\n        }\n        console.log(this.props.capture);\n        let htmlArray = res.data.businesses.map(resObj => \n          \n            <Link to=\"/Reviews\" onClick={() => this.props.capture(<Restaurant imgclicked={resObj} location={resObj.location.display_address} />,resObj.alias)} >\n              <Restaurant imgclicked={resObj} location={resObj.location.display_address} />\n            </Link>\n          \n        );\n        this.setState({data:res.data.businesses,resHTML:htmlArray});\n        //this.setState({resHTML:elements});\n        //this.img_onclick(1);\n        //console.log(this.state.data[0].location.display_address);\n        })\n        .catch((err) => {\n        console.log ('error');\n        })\n        \n      }\n      img_onclick=(id)=>{\n        var data=this.state.data[id]\n        this.setState({img_clicked:data})\n        this.setState({location:this.state.data[0].location.display_address})\n      }\n  \n  render() {\n    return (\n      <div id=\"Gridcontainer\">\n        \n       {this.state.resHTML}\n       \n       {/*<Restaurant imgclicked={this.state.img_clicked} location={this.state.location} />*/}\n        \n      </div>\n      \n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}