{"ast":null,"code":"import _regeneratorRuntime from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import LeaveReview from'./LeaveReview';import ReviewCell from'./ReviewCell';import Review from'./Review/Review';var Call=/*#__PURE__*/function(_Component){_inherits(Call,_Component);var _super=_createSuper(Call);function Call(props){var _this;_classCallCheck(this,Call);_this=_super.call(this,props);_this.state={data:[{}],name:'',rating:0,comment:'',reviews:['']};{/*this binds the functions*/}_this.takeName=_this.takeName.bind(_assertThisInitialized(_this));_this.takeRating=_this.takeRating.bind(_assertThisInitialized(_this));_this.takeComment=_this.takeComment.bind(_assertThisInitialized(_this));_this.createComment=_this.createComment.bind(_assertThisInitialized(_this));return _this;}_createClass(Call,[{key:\"takeName\",value:function takeName(event){{/* update the ymbol in state */}this.setState({name:event.target.value});}},{key:\"takeRating\",value:function takeRating(event){{/* update the ymbol in state */}this.setState({rating:event.target.value});}},{key:\"takeComment\",value:function takeComment(event){{/* update the quantity in state */}this.setState({comment:event.target.value});}},{key:\"createComment\",value:function createComment(){//   let newReviews = this.state.reviews;\n//   let newReviewHTML = <ReviewCell user={this.state.name} rating={this.state.rating} comment={this.state.comment}/>;\n//   newReviews.push(newReviewHTML);\n//  this.setState({reviews:newReviews});\n{/*this puts the data from the data fields into data*/}var currentReviews=this.state.data;var newReview={\"id\":\"\",\"url\":\"\",\"text\":this.state.comment,\"rating\":parseInt(this.state.rating),\"time_created\":new Date().toISOString().replace(\"T\",\" \").replace(\"Z\",\"\"),\"user\":{\"id\":\"\",\"profile_url\":\"\",\"image_url\":\"\",\"name\":this.state.name}};currentReviews.unshift(newReview);this.setState({data:currentReviews});}},{key:\"componentDidMount\",value:function componentDidMount(){{/* call the api on page load */}this.callApi();}},{key:\"callApi\",value:function(){var _callApi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.get('https://cors-anywhere.herokuapp.com/'.concat(\"https://api.yelp.com/v3/businesses/\",this.props.restuarant,\"/reviews\"),{headers:{Authorization:\"Bearer \".concat(process.env.REACT_APP_API_KEY)}}).then(function(res){_this2.setState({data:res.data.reviews});}).catch(function(err){console.log('error');});case 1:case\"end\":return _context.stop();}}},_callee,this);}));function callApi(){return _callApi.apply(this,arguments);}return callApi;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,this.state.reviews),/*#__PURE__*/React.createElement(Review,{data:this.state.data,reviewButton:/*#__PURE__*/React.createElement(LeaveReview,{takeName:this.takeName,takeRating:this.takeRating,takeComment:this.takeComment,createComment:this.createComment})}));}}]);return Call;}(Component);export{Call as default};","map":{"version":3,"sources":["/Users/student_ga108/Documents/Perscholas-sei-blended/PerScholas-sei-blended-Module-3-Week-2/secondtry/Your-Local-Menu/src/components/ReviewCall.js"],"names":["React","Component","axios","LeaveReview","ReviewCell","Review","Call","props","state","data","name","rating","comment","reviews","takeName","bind","takeRating","takeComment","createComment","event","setState","target","value","currentReviews","newReview","parseInt","Date","toISOString","replace","unshift","callApi","get","restuarant","headers","Authorization","process","env","REACT_APP_API_KEY","then","res","catch","err","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport LeaveReview from './LeaveReview';\nimport ReviewCell from './ReviewCell';\nimport Review from './Review/Review'\n\n\nexport default class Call extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n          data: [{}],\n          name:'',\n          rating:0,\n          comment:'',\n          reviews:['']\n\n        }\n        {/*this binds the functions*/}\n        this.takeName = this.takeName.bind(this);\n        this.takeRating = this.takeRating.bind(this);\n        this.takeComment = this.takeComment.bind(this);\n        this.createComment = this.createComment.bind(this);\n  }\n\n  takeName(event){\n    {/* update the ymbol in state */}\n    this.setState({name: event.target.value});\n  }\n\n  takeRating(event){\n    {/* update the ymbol in state */}\n    this.setState({rating: event.target.value});\n  }\n\n  takeComment(event){\n    {/* update the quantity in state */}\n    this.setState({comment: event.target.value});\n  }\n\n  createComment(){\n    //   let newReviews = this.state.reviews;\n    //   let newReviewHTML = <ReviewCell user={this.state.name} rating={this.state.rating} comment={this.state.comment}/>;\n    //   newReviews.push(newReviewHTML);\n    //  this.setState({reviews:newReviews});\n    {/*this puts the data from the data fields into data*/}\n    let currentReviews = this.state.data;\n    let newReview =  {\n        \"id\": \"\",\n        \"url\": \"\",\n        \"text\": this.state.comment,\n        \"rating\": parseInt(this.state.rating),\n        \"time_created\": new Date().toISOString().replace(\"T\", \" \").replace(\"Z\", \"\"),\n        \"user\": {\n          \"id\": \"\",\n          \"profile_url\": \"\",\n          \"image_url\": \"\",\n          \"name\": this.state.name\n        }\n      };\n      currentReviews.unshift(newReview);\n      this.setState({data:currentReviews});\n\n  }\n\n    componentDidMount() {\n   \n        {/* call the api on page load */}\n        this.callApi();\n    }\n    async callApi() {\n \n        {/*https://medium.com/@chaoyue_zhao/how-to-make-axios-api-calls-with-yelp-fusion-inside-react-js-10755d8485c5*/}\n        {/*this calls the api and puts the response data into state*/}\n        axios.get(`${'https://cors-anywhere.herokuapp.com/'}https://api.yelp.com/v3/businesses/${this.props.restuarant}/reviews`, {\n        headers: {\n            Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n        }\n        })\n        .then((res) => {\n  \n          this.setState({data:res.data.reviews})\n        \n        })\n        .catch((err) => {\n        console.log ('error');\n        })\n        \n      }\n  \n  render() {\n    \n    return (\n      <div>\n\n        \n        <div>{this.state.reviews}</div>      \n      <Review data={this.state.data} reviewButton={<LeaveReview takeName={this.takeName} takeRating={this.takeRating} takeComment={this.takeComment} createComment={this.createComment} />}/>\n\n      </div>\n      \n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}